<style>
/* Scrollbar Stuff */
.ssb_down{
  background:transparent url(icon-arrow-down.png);
  bottom:0;
  cursor:pointer;
  position:absolute;
  right:0;
}

.ssb_sb{
  background:transparent url(middle.png);
  cursor:pointer;
  position:absolute;
  right:0;
}

.ssb_sb_down{
  background:transparent url(middrag.png);
}

.ssb_sb_over{
  background:transparent url(midhover.png);
}

.ssb_st{
  background:transparent url(back.png);
  cursor:pointer;
  height:100%;
  position:absolute;
  right:0;
  top:0;
}

.ssb_up{
  background:transparent url(icon-arrow-up.png);
  cursor:pointer;
  position:absolute;
  right:0;
  top:0;
}

/* Document Stuff */
body{
  background:#eee;
  margin: 0px;
  padding: 0px;
}
.outer{
  display: flex;  /* Verical align    */
  height: 100%;   /* Verical align    */
  margin: 0 auto; /* Horizontal align */
  width: 80%;     /* Horizontal align */
}
.inner{
  position: relative;
  height: 50%;
  width: 100%;
  margin: auto 0px;
  background: #fff;
  overflow: hidden;
}
#main_content{
  position: relative;
  width: 100%;
  margin: 0px;
  overflow: auto;
}
#main_content > div{
  /*margin: 0px;*/
}

html, body{
  overflow: hidden;
  height: 100%;
}

#main_content{
  overflow: auto;
  width: 100%;
  height: 100%;
}

.custom-scrollbar{
  position: absolute;
  top: 0px;
  /*right: 0px;*/ /* THIS IS CORRECT AND MAKES IT ON THE RIGHT SIDE */
  height: 100%;
}
.custom-scrollbar > .track{
  position: relative;
  width: 100%;
  height: 100%;
}
.custom-scrollbar > .thumb{
  position: absolute;
  width: 100%;
  background-color: gold;
}
.custom-scrollbar > .up,
.custom-scrollbar > .down{
  position: relative;
  width: 100%;
}
.custom-scrollbar > .up{
}
.custom-scrollbar > .down{
}
</style>

<!DOCTYPE html>
<html>
  <head>
    <title>Testing</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  </head>
  <body>
  <div class="outer">
    <div class="inner">
      <div id="main_content">
        <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis in pharetra odio. Aliquam nisi diam, ultrices at fringilla suscipit, malesuada aliquam enim. Suspendisse congue lacinia diam fermentum feugiat. Nunc dignissim ullamcorper tortor, ut porta justo interdum sed. Sed quam urna, laoreet ut magna vel, malesuada iaculis ex. Curabitur massa elit, consectetur at tincidunt ut, placerat eget leo. Vestibulum malesuada nec est sit amet sagittis. Sed ligula sapien, condimentum eu varius at, ornare vitae enim. Morbi convallis venenatis tristique.</div>
        <div>Duis egestas dolor turpis, et semper mi accumsan vel. Etiam fermentum eleifend ullamcorper. Praesent gravida purus ultricies, pretium nulla non, finibus metus. Integer ut aliquet ipsum. Etiam in ornare odio. Donec blandit urna at magna consectetur interdum. Maecenas non massa sem.</div>
        <div>Aliquam vel elementum ante. Nunc eget risus ipsum. Proin nec dignissim est. In sit amet sapien ante. Proin aliquam enim et ante lacinia eleifend. Praesent lobortis tristique nunc, sed tempus ante bibendum in. Donec ut semper tortor. Aliquam id elit ipsum. Morbi sit amet sagittis risus. Vivamus ultricies pellentesque justo, a lacinia magna auctor ut.</div>
        <div>Duis rhoncus ex nec ante condimentum fringilla. Aliquam felis augue, tristique et justo in, posuere porta sem. Fusce gravida euismod facilisis. Nunc feugiat condimentum orci eu lacinia. Cras non consectetur velit. Suspendisse lacinia gravida massa at dictum. In non velit quis nulla congue tempor. Integer lobortis suscipit lorem ac sollicitudin.</div>
        <div>Duis luctus nibh iaculis, porta erat ac, pulvinar mauris. Aenean vel nunc turpis. Nam a maximus quam, id faucibus erat. Etiam porttitor vulputate rutrum. Phasellus blandit semper augue non posuere. Cras egestas eros vitae laoreet gravida. Donec id tortor metus. Pellentesque turpis nulla, tempor vel blandit quis, sollicitudin vel ipsum. Fusce venenatis elit et sapien maximus fermentum. Proin a dui vitae felis vestibulum auctor at eget turpis. Phasellus vulputate semper volutpat. Vivamus vulputate sapien vel lacus sollicitudin, at pharetra arcu elementum. Donec eu luctus ex. Nunc eget dapibus orci.</div>
        <div>Donec tempor placerat posuere. Suspendisse potenti. Donec faucibus pellentesque ornare. Maecenas semper rhoncus rutrum. In tincidunt risus a auctor faucibus. Pellentesque placerat convallis dolor, quis accumsan nisl gravida sed. Vivamus vitae ligula justo. Suspendisse pulvinar diam eget tellus commodo varius. Proin a libero rhoncus, pharetra dui mattis, imperdiet lectus.</div>
        <div>Nam et ante a nunc gravida gravida. Sed congue tristique molestie. Donec ut leo ante. Nulla sollicitudin mauris sed tortor porttitor consequat. Vestibulum vitae felis quis nisi euismod tempus ut sed magna. Sed cursus massa quis aliquet faucibus. Aenean sed scelerisque purus. Curabitur lacus diam, malesuada ac magna dignissim, fringilla efficitur mauris. Integer fermentum erat ac massa dignissim volutpat. Cras ullamcorper consequat est nec suscipit. Maecenas finibus mollis dolor sed sodales. Integer commodo, lorem et vehicula convallis, nunc mi tristique nisl, ac suscipit libero tortor quis lectus. Maecenas quis convallis turpis. Pellentesque vitae magna ultrices, blandit odio ut, placerat lectus. Suspendisse fermentum porttitor turpis eu dignissim. Ut porttitor tristique arcu, non tristique lacus molestie dignissim.</div>
        <div>Proin consectetur, nulla eget pellentesque vestibulum, dui nisi tempor dolor, vel ultricies nulla ex vitae dolor. Etiam facilisis mi orci, eu facilisis lorem aliquet non. Duis pellentesque nibh sit amet varius laoreet. Vivamus viverra augue tellus, ornare mollis tellus mattis eu. Phasellus velit metus, feugiat ultricies ultrices sit amet, ullamcorper dapibus mi. In hac habitasse platea dictumst. Vivamus non porta nulla.</div>
        <div>Interdum et malesuada fames ac ante ipsum primis in faucibus. Nulla sit amet metus ut enim interdum ultricies. Ut vitae erat quis massa ultrices rhoncus. Quisque dapibus scelerisque neque, suscipit rhoncus dui sodales in. Sed tincidunt molestie sem nec consequat. Nam id purus sem. Nunc sagittis imperdiet ligula, et ultrices neque dictum eu. Mauris ultrices volutpat cursus. Vestibulum placerat nulla et tincidunt laoreet. Aliquam nisi erat, cursus ac faucibus quis, sollicitudin sed nisi.</div>
        <div>Sed ac nulla sit amet felis vestibulum sollicitudin id ullamcorper tellus. Nam semper odio felis, et pellentesque enim vulputate quis. Nulla fermentum lectus orci, quis ultrices lacus egestas rhoncus. Nullam vestibulum lobortis mi, vitae convallis orci pretium quis. Donec eget enim vel leo cursus mattis molestie sollicitudin dolor. Duis placerat erat vel felis maximus, quis pharetra augue varius. Donec bibendum malesuada eros sit amet facilisis. Phasellus condimentum, ipsum nec finibus viverra, diam enim gravida nisi, in dapibus turpis mi eget nisi. Maecenas a massa ligula.</div>
        <div>Duis rhoncus ex nec ante condimentum fringilla. Aliquam felis augue, tristique et justo in, posuere porta sem. Fusce gravida euismod facilisis. Nunc feugiat condimentum orci eu lacinia. Cras non consectetur velit. Suspendisse lacinia gravida massa at dictum. In non velit quis nulla congue tempor. Integer lobortis suscipit lorem ac sollicitudin.</div>
        <div>Duis luctus nibh iaculis, porta erat ac, pulvinar mauris. Aenean vel nunc turpis. Nam a maximus quam, id faucibus erat. Etiam porttitor vulputate rutrum. Phasellus blandit semper augue non posuere. Cras egestas eros vitae laoreet gravida. Donec id tortor metus. Pellentesque turpis nulla, tempor vel blandit quis, sollicitudin vel ipsum. Fusce venenatis elit et sapien maximus fermentum. Proin a dui vitae felis vestibulum auctor at eget turpis. Phasellus vulputate semper volutpat. Vivamus vulputate sapien vel lacus sollicitudin, at pharetra arcu elementum. Donec eu luctus ex. Nunc eget dapibus orci.</div>
        <div>Donec tempor placerat posuere. Suspendisse potenti. Donec faucibus pellentesque ornare. Maecenas semper rhoncus rutrum. In tincidunt risus a auctor faucibus. Pellentesque placerat convallis dolor, quis accumsan nisl gravida sed. Vivamus vitae ligula justo. Suspendisse pulvinar diam eget tellus commodo varius. Proin a libero rhoncus, pharetra dui mattis, imperdiet lectus.</div>
        <div>Nam et ante a nunc gravida gravida. Sed congue tristique molestie. Donec ut leo ante. Nulla sollicitudin mauris sed tortor porttitor consequat. Vestibulum vitae felis quis nisi euismod tempus ut sed magna. Sed cursus massa quis aliquet faucibus. Aenean sed scelerisque purus. Curabitur lacus diam, malesuada ac magna dignissim, fringilla efficitur mauris. Integer fermentum erat ac massa dignissim volutpat. Cras ullamcorper consequat est nec suscipit. Maecenas finibus mollis dolor sed sodales. Integer commodo, lorem et vehicula convallis, nunc mi tristique nisl, ac suscipit libero tortor quis lectus. Maecenas quis convallis turpis. Pellentesque vitae magna ultrices, blandit odio ut, placerat lectus. Suspendisse fermentum porttitor turpis eu dignissim. Ut porttitor tristique arcu, non tristique lacus molestie dignissim.</div>
        <div>.</div>
        <div>.</div>
        <div>.</div>
        <div>The end</div>
      </div>
    </div>
  </div>
  </body>
</html>

<script>

$.fn.csb = function(options){
  var mainContent  = $(this)[0];
  var self         = $(this)[0];
  var step         = 10; // Default: User-defined
  var buttonWidth  = 16; // Default: User-defined
  var buttonHeight = 16; // Default: User-defined
  var thumbWidth   = 16; // Default: User-defined
  var thumbHeight  = -1; // Default: User-defined
  var trackWidth   = 16; // Default: User-defined
  var newScrollPosition;
  var cs;    // The custom scrollbar container
  var up;    // The up button
  var down;  // The down button
  var track; // The background track
  var thumb; // The grabbable piece
  Init();

  function Init(){
    CheckOptions(options);

    // Inject scrollbar
    var html = $(self).parent().append(`
      <div class="custom-scrollbar">
        <div class="up"></div>
        <div class="track"></div>
        <div class="down"></div>
        <div class="thumb"></div>
      </div>`);
    html.prepend(self);

    // Set variables for referencing later
    cs    = $(self).parent().find(".custom-scrollbar");
    up    = $(self).parent().find(".up");
    down  = $(self).parent().find(".down");
    track = $(self).parent().find(".track");
    thumb = $(self).parent().find(".thumb");

    // Assign events
    $(self).scroll(Scroll);
    $(up).mousedown(ButtonClick);
    $(down).mousedown(ButtonClick);
    $(track).mousedown(ClickOnTrack);
    $(thumb).mousedown(ClickOnThumb);

    // Everything is now setup, this will update the scrollbar
    $(self).trigger("scroll");
  }

  function CheckOptions(options){
    console.log(options);
    if(options["step"])         step         = options["step"];
    if(options["buttonWidth"])  buttonWidth  = options["buttonWidth"];
    if(options["buttonHeight"]) buttonHeight = options["buttonHeight"];
    if(options["thumbWidth"])   thumbWidth   = options["thumbWidth"];
    if(options["thumbHeight"])  thumbHeight  = options["thumbHeight"];
    if(options["trackWidth"])   trackWidth   = options["trackWidth"];
  }

  function Scroll(){
    // offsetHeight: Stays the same = Height of the scrollable element               [335]
    // scrollHeight: Stays the same = Total height of all content within the element [882]
    // scrollTop:    Goes from 0 to (offsetHeight - scrollHeight)                    [0-547]

    // console.log(`offsetHeight = ${this.offsetHeight} | scrollHeight = ${this.scrollHeight} | scrollTop = ${this.scrollTop}`);
    // console.log(`Scroll Percentage = ${this.scrollTop / (this.scrollHeight-this.offsetHeight) * 100}%`);

    // Set padding-right to the width of the default scrollbar
    var scrollbarWidth = this.offsetWidth - this.clientWidth + "px";
    $(this).css("padding-right", scrollbarWidth);

    var buttonLeft = (trackWidth - buttonWidth) / 2;
    $(up).css("left",     buttonLeft);
    $(up).css("width",    buttonWidth);
    $(up).css("height",   buttonHeight);
    $(down).css("left",   buttonLeft);
    $(down).css("width",  buttonWidth);
    $(down).css("height", buttonHeight);

    // Calculate the thumb height
    if(!thumbHeight)
      thumbHeight = 64;

    $(thumb).css("width",  thumbWidth  + "px");
    $(thumb).css("height", thumbHeight + "px");

    var thumbLeft = (trackWidth - thumbWidth) / 2;
    $(thumb).css("left", thumbLeft + "px");

    var yoloSwag = this.offsetHeight - (buttonHeight * 2);
    $(track).css("height", yoloSwag + "px");

    // Decrease the track sliding length by the
    // height of both buttons + height of thumb
    var changeThisVarNameLater = buttonHeight * 2 + thumbHeight;
    var offsetHeight2 = this.offsetHeight - changeThisVarNameLater;

    var delta = this.scrollTop / (this.scrollHeight - this.offsetHeight);
    var scrollPercentage = delta * offsetHeight2 + buttonHeight;

    $(thumb).css("top", scrollPercentage);

    $(cs).css("width", `${trackWidth}px`);               // USER-DEFINED!
    $(track).css("background-color", "gray"); // USER-DEFINED!

    if(delta == 0) $(up).css("background-color", "cyan");
    else           $(up).css("background-color", "blue");

    if(delta == 1) $(down).css("background-color", "lightgreen");
    else           $(down).css("background-color", "green");
  }

  function ScrollWithButton(){
    var newScrollPosition;

    if($(ScrollWithButton.self).hasClass("up")){
      newScrollPosition = (mainContent.scrollTop - step);
      console.log(newScrollPosition);
      if(newScrollPosition < 0)
        newScrollPosition = 0;
    }else{
      newScrollPosition = (mainContent.scrollTop + step);
      if(newScrollPosition > mainContent.scrollHeight - mainContent.offsetHeight)
        newScrollPosition = mainContent.scrollHeight - mainContent.offsetHeight;
    }

    $(mainContent).stop().animate({
      scrollTop: newScrollPosition
    }, 10);
  }

  function ButtonClick(event){
    event.preventDefault();
    ScrollWithButton.self = this;
    ScrollWithButton();
    var timeout = setInterval(ScrollWithButton, 10);
    $(document).mouseup(function(){clearInterval(timeout);});
  }

  function TrackClick(){
    var offsetY = $(TrackClick.self).offset().top;
    var clickHeight = event.pageY - offsetY;
    var trackHeight = parseFloat($(track).css("height"));
    var thumbHeight = parseFloat($(thumb).css("height"));
    var upperMargin = thumbHeight/2;
    var lowerMargin = trackHeight - thumbHeight/2;
    var trackHeightNoMargin = lowerMargin - upperMargin;
    var trackMultiplier = 100 / trackHeightNoMargin;
    var delta = mainContent.scrollHeight - mainContent.offsetHeight;
    var percent;

    // If the user clicked in the upper or lower margin of the scrollbar,
    // it would act like the user clicked on the boundary of the margin instead
    if(clickHeight < upperMargin)       clickHeight = upperMargin;
    else if(clickHeight > lowerMargin) clickHeight = lowerMargin;

    // Remove the margin so that we can calculate the percentage
    clickHeight -= upperMargin;

    // Finally, find the percentage and set it
    percent = ((clickHeight * trackMultiplier) / 100) * delta;

    mainContent.scrollTop = percent;
  }

  function TrackDrag(){
    $(document).mousemove(function(event){
      TrackClick();
    });

    $(document).mouseup(function(event){
      $(document).unbind("mousemove");
      $(document).unbind("mouseup");
    });
  }

  function ClickOnTrack(event){
    event.preventDefault();
    TrackClick.self = $(this);
    TrackClick();
    TrackDrag();
  }

  function ClickOnThumb(event){
    event.preventDefault();
    TrackClick.self = $(this).parent().find(".track");
    TrackDrag();
  }
}

var options = {
  "step": 10,
  "buttonWidth": 4,
  "buttonHeight": 20,
  "thumbWidth": 1,
  "thumbHeight": 50,
  "trackWidth": 50
};

$("#main_content").csb(options);

</script>
