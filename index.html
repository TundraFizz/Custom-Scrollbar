<style>
/* Scrollbar Stuff */
.ssb_down{
  background:transparent url(icon-arrow-down.png);
  bottom:0;
  cursor:pointer;
  position:absolute;
  right:0;
}

.ssb_sb{
  background:transparent url(middle.png);
  cursor:pointer;
  position:absolute;
  right:0;
}

.ssb_sb_down{
  background:transparent url(middrag.png);
}

.ssb_sb_over{
  background:transparent url(midhover.png);
}

.ssb_st{
  background:transparent url(back.png);
  cursor:pointer;
  height:100%;
  position:absolute;
  right:0;
  top:0;
}

.ssb_up{
  background:transparent url(icon-arrow-up.png);
  cursor:pointer;
  position:absolute;
  right:0;
  top:0;
}

/* Document Stuff */
body{
  background:#eee;
  margin: 0px;
  padding: 0px;
}
.outer{
  display: flex;  /* Verical align    */
  height: 100%;   /* Verical align    */
  margin: 0 auto; /* Horizontal align */
  width: 80%;     /* Horizontal align */
}
.inner{
  display: flex;
  height: 50%;
  width: 100%;
  margin: auto 0px;
  background: #fff;
  border: 1px #000 solid;
}
#main_content{
  position: relative;
  width: 100%;
  margin: 0px;
  overflow: auto;
}
#main_content > div{
  /*margin: 0px;*/
}
</style>

<!DOCTYPE html>
<html>
<head>
  <title>Testing</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>
<body>
  <div class="outer">
    <div class="inner">
      <div id="main_content">
        <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis in pharetra odio. Aliquam nisi diam, ultrices at fringilla suscipit, malesuada aliquam enim. Suspendisse congue lacinia diam fermentum feugiat. Nunc dignissim ullamcorper tortor, ut porta justo interdum sed. Sed quam urna, laoreet ut magna vel, malesuada iaculis ex. Curabitur massa elit, consectetur at tincidunt ut, placerat eget leo. Vestibulum malesuada nec est sit amet sagittis. Sed ligula sapien, condimentum eu varius at, ornare vitae enim. Morbi convallis venenatis tristique.</div>
        <div>Duis egestas dolor turpis, et semper mi accumsan vel. Etiam fermentum eleifend ullamcorper. Praesent gravida purus ultricies, pretium nulla non, finibus metus. Integer ut aliquet ipsum. Etiam in ornare odio. Donec blandit urna at magna consectetur interdum. Maecenas non massa sem.</div>
        <div>Aliquam vel elementum ante. Nunc eget risus ipsum. Proin nec dignissim est. In sit amet sapien ante. Proin aliquam enim et ante lacinia eleifend. Praesent lobortis tristique nunc, sed tempus ante bibendum in. Donec ut semper tortor. Aliquam id elit ipsum. Morbi sit amet sagittis risus. Vivamus ultricies pellentesque justo, a lacinia magna auctor ut.</div>
        <div>Duis rhoncus ex nec ante condimentum fringilla. Aliquam felis augue, tristique et justo in, posuere porta sem. Fusce gravida euismod facilisis. Nunc feugiat condimentum orci eu lacinia. Cras non consectetur velit. Suspendisse lacinia gravida massa at dictum. In non velit quis nulla congue tempor. Integer lobortis suscipit lorem ac sollicitudin.</div>
        <div>Duis luctus nibh iaculis, porta erat ac, pulvinar mauris. Aenean vel nunc turpis. Nam a maximus quam, id faucibus erat. Etiam porttitor vulputate rutrum. Phasellus blandit semper augue non posuere. Cras egestas eros vitae laoreet gravida. Donec id tortor metus. Pellentesque turpis nulla, tempor vel blandit quis, sollicitudin vel ipsum. Fusce venenatis elit et sapien maximus fermentum. Proin a dui vitae felis vestibulum auctor at eget turpis. Phasellus vulputate semper volutpat. Vivamus vulputate sapien vel lacus sollicitudin, at pharetra arcu elementum. Donec eu luctus ex. Nunc eget dapibus orci.</div>
        <div>Donec tempor placerat posuere. Suspendisse potenti. Donec faucibus pellentesque ornare. Maecenas semper rhoncus rutrum. In tincidunt risus a auctor faucibus. Pellentesque placerat convallis dolor, quis accumsan nisl gravida sed. Vivamus vitae ligula justo. Suspendisse pulvinar diam eget tellus commodo varius. Proin a libero rhoncus, pharetra dui mattis, imperdiet lectus.</div>
        <div>Nam et ante a nunc gravida gravida. Sed congue tristique molestie. Donec ut leo ante. Nulla sollicitudin mauris sed tortor porttitor consequat. Vestibulum vitae felis quis nisi euismod tempus ut sed magna. Sed cursus massa quis aliquet faucibus. Aenean sed scelerisque purus. Curabitur lacus diam, malesuada ac magna dignissim, fringilla efficitur mauris. Integer fermentum erat ac massa dignissim volutpat. Cras ullamcorper consequat est nec suscipit. Maecenas finibus mollis dolor sed sodales. Integer commodo, lorem et vehicula convallis, nunc mi tristique nisl, ac suscipit libero tortor quis lectus. Maecenas quis convallis turpis. Pellentesque vitae magna ultrices, blandit odio ut, placerat lectus. Suspendisse fermentum porttitor turpis eu dignissim. Ut porttitor tristique arcu, non tristique lacus molestie dignissim.</div>
        <div>Proin consectetur, nulla eget pellentesque vestibulum, dui nisi tempor dolor, vel ultricies nulla ex vitae dolor. Etiam facilisis mi orci, eu facilisis lorem aliquet non. Duis pellentesque nibh sit amet varius laoreet. Vivamus viverra augue tellus, ornare mollis tellus mattis eu. Phasellus velit metus, feugiat ultricies ultrices sit amet, ullamcorper dapibus mi. In hac habitasse platea dictumst. Vivamus non porta nulla.</div>
        <div>Interdum et malesuada fames ac ante ipsum primis in faucibus. Nulla sit amet metus ut enim interdum ultricies. Ut vitae erat quis massa ultrices rhoncus. Quisque dapibus scelerisque neque, suscipit rhoncus dui sodales in. Sed tincidunt molestie sem nec consequat. Nam id purus sem. Nunc sagittis imperdiet ligula, et ultrices neque dictum eu. Mauris ultrices volutpat cursus. Vestibulum placerat nulla et tincidunt laoreet. Aliquam nisi erat, cursus ac faucibus quis, sollicitudin sed nisi.</div>
        <div>Sed ac nulla sit amet felis vestibulum sollicitudin id ullamcorper tellus. Nam semper odio felis, et pellentesque enim vulputate quis. Nulla fermentum lectus orci, quis ultrices lacus egestas rhoncus. Nullam vestibulum lobortis mi, vitae convallis orci pretium quis. Donec eget enim vel leo cursus mattis molestie sollicitudin dolor. Duis placerat erat vel felis maximus, quis pharetra augue varius. Donec bibendum malesuada eros sit amet facilisis. Phasellus condimentum, ipsum nec finibus viverra, diam enim gravida nisi, in dapibus turpis mi eget nisi. Maecenas a massa ligula.</div>
      </div>
    </div>
  </div>
</body>
</html>

<script>

$.fn.csb = function(){
  var aConts = [];
  var self   = this;
  var mouseY = 0;
  var asd    = 0; // Active scrollbar element
  var sc     = 0;
  var sp     = 0;
  var to     = 0;
  var N      = 0;
  scrollbar();

  function scrollbar(){
    // perform initialization
    if(!init())
      return false;

    var selfClone = self.clone(false);
    selfClone.css("overflow", "hidden");
    self.html("");
    self.append(selfClone);

    // selfClone.append(self);
    self.css("position", "absolute");
    self.css("left",     "0px");
    self.css("top",      "0px");
    self.css("width",    "100%");
    self.css("height",   "100%");

    // adding new container into array
    aConts[N++] = self;
    self.sg = false;

    //creating scrollbar child elements
    self.st = CreateDiv("ssb_st", selfClone, self);
    self.sb = CreateDiv("ssb_sb", selfClone, self);
    self.su = CreateDiv("ssb_up", selfClone, self);
    self.sd = CreateDiv("ssb_down", selfClone, self);
    // self.st = CreateDiv("ssb_st", self, selfClone);
    // self.sb = CreateDiv("ssb_sb", self, selfClone);
    // self.su = CreateDiv("ssb_up", self, selfClone);
    // self.sd = CreateDiv("ssb_down", self, selfClone);

    // on mouse down processing
    self.sb.onmousedown = function (e){
      if (!this.self.sg){
        if (! e) e = window.event;
        ssb.asd = this.self;
        this.self.yZ = e.screenY;
        this.self.sZ = self.scrollTop;
        this.self.sg = true;
        // new class name
        this.className = "ssb_sb ssb_sb_down";
      }
      return false;
    }

    // on mouse down on free track area - move our scroll element too
    self.st.onmousedown = function (e){
      if (! e) e = window.event;
      ssb.asd = this.self;
      ssb.mouseY = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
      for (var o = this.self, y = 0; o != null; o = o.offsetParent) y += o.offsetTop;
      this.self.scrollTop = (ssb.mouseY - y - (this.self.ratio * this.self.offsetHeight / 2) - this.self.sw) / this.self.ratio;
      this.self.sb.onmousedown(e);
    }

    // onmousedown events
    self.su.onmousedown = self.su.ondblclick = function (e) { ssb.mousedown(this, -1); return false; }
    self.sd.onmousedown = self.sd.ondblclick = function (e) { ssb.mousedown(this,  1); return false; }
    //onmouseout events
    self.su.onmouseout = self.su.onmouseup = clear;
    self.sd.onmouseout = self.sd.onmouseup = clear;
    // on mouse over - apply custom class name: ssb_sb_over
    self.sb.onmouseover = function (e){
      if (! this.self.sg) this.className = 'ssb_sb ssb_sb_over';
      return false;
    }

    // on mouse out - revert back our usual class name 'ssb_sb'
    self.sb.onmouseout  = function (e){
      if (! this.self.sg) this.className = 'ssb_sb';
      return false;
    }

    // onscroll - change positions of scroll element
    self.ssb_onscroll = function (){
      this.ratio = (this.offsetHeight - 2 * this.sw) / this.scrollHeight;
      this.sb.style.top = Math.floor(this.sw + this.scrollTop * this.ratio) + 'px';
    }

    // scrollbar width
    self.sw = 20;
    // start scrolling
    self.ssb_onscroll();
    refresh();
    // binding own onscroll event
    self.onscroll = self.ssb_onscroll;
    return self;
  }

  function init(){
    if(window.oper || (! window.addEventListener && ! window.attachEvent))
      return false;

    // temp inner function for event registration
    function addEvent(o, e, f){
      if(window.addEventListener){
        o.addEventListener(e, f, false);
        this.w3c = true;
        return true;
      }

      if(window.attachEvent)
        return o.attachEvent("on" + e, f);
      return false;
    }

    // binding events
    addEvent(window.document, "mousemove", this.onmousemove);
    addEvent(window.document, "mouseup", this.onmouseup);
    addEvent(window, "resize", this.refresh);
    return true;
  }

  function CreateDiv(c, cont, selfClone){
    var o = document.createElement("div");
    o.cont = cont;
    o.className = c;
    selfClone.append(o);
    return o;
  }

  function clear(){
    clearTimeout(ssb.to);
    ssb.sc = 0;
    return false;
  }

  function refresh(){
    for (var i = 0, N = N; i < N; i++){
    var o = aConts[i];
    o.ssb_onscroll();
    o.sb.style.width = o.st.style.width = o.su.style.width = o.su.style.height = o.sd.style.width = o.sd.style.height = o.sw + 'px';
    o.sb.style.height = Math.ceil(Math.max(o.sw * .5, o.ratio * o.offsetHeight) + 1) + 'px';
    }
  }
};

$("#main_content").csb();

window.onload = function() {
  // Initialize the custom scrollbar
  // ssb.scrollbar("#main_content");
}

var ssb = {
  aConts  : [],
  mouseY : 0,
  N  : 0,
  asd : 0, /*active scrollbar element*/
  sc : 0,
  sp : 0,
  to : 0,

  // constructor
  // function scrollbar(cont_id){
  scrollbar : function(cont_id) {
    var cont = $(`${cont_id}`)[0];

    // perform initialization
    if(!ssb.init())
      return false;

    var cont_clone = cont.cloneNode(false);
    cont_clone.style.overflow = "hidden";
    cont.parentNode.appendChild(cont_clone);
    cont_clone.appendChild(cont);
    cont.style.position = 'absolute';
    cont.style.left = cont.style.top = '0px';
    cont.style.width = cont.style.height = '100%';

    // adding new container into array
    ssb.aConts[ssb.N++] = cont;
    cont.sg = false;

    //creating scrollbar child elements
    cont.st = this.create_div('ssb_st', cont, cont_clone);
    cont.sb = this.create_div('ssb_sb', cont, cont_clone);
    cont.su = this.create_div('ssb_up', cont, cont_clone);
    cont.sd = this.create_div('ssb_down', cont, cont_clone);

    // on mouse down processing
    cont.sb.onmousedown = function (e){
      if (!this.cont.sg){
        if (! e) e = window.event;
        ssb.asd = this.cont;
        this.cont.yZ = e.screenY;
        this.cont.sZ = cont.scrollTop;
        this.cont.sg = true;
        // new class name
        this.className = 'ssb_sb ssb_sb_down';
      }
      return false;
    }

    // on mouse down on free track area - move our scroll element too
    cont.st.onmousedown = function (e){
      if (! e) e = window.event;
      ssb.asd = this.cont;
      ssb.mouseY = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
      for (var o = this.cont, y = 0; o != null; o = o.offsetParent) y += o.offsetTop;
      this.cont.scrollTop = (ssb.mouseY - y - (this.cont.ratio * this.cont.offsetHeight / 2) - this.cont.sw) / this.cont.ratio;
      this.cont.sb.onmousedown(e);
    }

    // onmousedown events
    cont.su.onmousedown = cont.su.ondblclick = function (e) { ssb.mousedown(this, -1); return false; }
    cont.sd.onmousedown = cont.sd.ondblclick = function (e) { ssb.mousedown(this,  1); return false; }
    //onmouseout events
    cont.su.onmouseout = cont.su.onmouseup = ssb.clear;
    cont.sd.onmouseout = cont.sd.onmouseup = ssb.clear;
    // on mouse over - apply custom class name: ssb_sb_over
    cont.sb.onmouseover = function (e){
      if (! this.cont.sg) this.className = 'ssb_sb ssb_sb_over';
      return false;
    }

    // on mouse out - revert back our usual class name 'ssb_sb'
    cont.sb.onmouseout  = function (e){
      if (! this.cont.sg) this.className = 'ssb_sb';
      return false;
    }

    // onscroll - change positions of scroll element
    cont.ssb_onscroll = function (){
      this.ratio = (this.offsetHeight - 2 * this.sw) / this.scrollHeight;
      this.sb.style.top = Math.floor(this.sw + this.scrollTop * this.ratio) + 'px';
    }

    // scrollbar width
    cont.sw = 20;
    // start scrolling
    cont.ssb_onscroll();
    ssb.refresh();
    // binding own onscroll event
    cont.onscroll = cont.ssb_onscroll;
    return cont;
  },

  // initialization
  init : function (){
    if (window.oper || (! window.addEventListener && ! window.attachEvent))
      return false;

    // temp inner function for event registration
    function addEvent (o, e, f){
      if(window.addEventListener){
        o.addEventListener(e, f, false);
        ssb.w3c = true;
        return true;
      }

      if(window.attachEvent)
        return o.attachEvent('on' + e, f);

      return false;
    }

    // binding events
    addEvent(window.document, 'mousemove', ssb.onmousemove);
    addEvent(window.document, 'mouseup', ssb.onmouseup);
    addEvent(window, 'resize', ssb.refresh);
    return true;
  },

  // create and append div func
  create_div : function(c, cont, cont_clone) {
    var o = document.createElement('div');
    o.cont = cont;
    o.className = c;
    cont_clone.appendChild(o);
    return o;
  },

  // do clear of controls
  clear : function () {
    clearTimeout(ssb.to);
    ssb.sc = 0;
    return false;
  },

  // refresh scrollbar
  refresh : function () {
    for (var i = 0, N = ssb.N; i < N; i++) {
    var o = ssb.aConts[i];
    o.ssb_onscroll();
    o.sb.style.width = o.st.style.width = o.su.style.width = o.su.style.height = o.sd.style.width = o.sd.style.height = o.sw + 'px';
    o.sb.style.height = Math.ceil(Math.max(o.sw * .5, o.ratio * o.offsetHeight) + 1) + 'px';
    }
  },

  // arrow scrolling
  arrow_scroll : function () {
    if (ssb.sc != 0) {
    ssb.asd.scrollTop += 6 * ssb.sc / ssb.asd.ratio;
    ssb.to = setTimeout(ssb.arrow_scroll, ssb.sp);
    ssb.sp = 32;
    }
  },

  /* event binded functions : */
  // scroll on mouse down
  mousedown : function (o, s) {
    if (ssb.sc == 0) {
      // new class name
      o.cont.sb.className = 'ssb_sb ssb_sb_down';
      ssb.asd = o.cont;
      ssb.sc = s;
      ssb.sp = 400;
      ssb.arrow_scroll();
    }
  },

    // on mouseMove binded event
  onmousemove : function(e) {
    if (! e) e = window.event;
    // get vertical mouse position
    ssb.mouseY = e.screenY;
    if (ssb.asd.sg) ssb.asd.scrollTop = ssb.asd.sZ + (ssb.mouseY - ssb.asd.yZ) / ssb.asd.ratio;
  },

  // on mouseUp binded event
  onmouseup : function (e) {
    if (! e) e = window.event;
    var tg = (e.target) ? e.target : e.srcElement;
    if (ssb.asd && document.releaseCapture) ssb.asd.releaseCapture();
    // new class name
    if (ssb.asd) ssb.asd.sb.className = (tg.className.indexOf('scrollbar') > 0) ? 'ssb_sb ssb_sb_over' : 'ssb_sb';
    document.onselectstart = '';
    ssb.clear();
    ssb.asd.sg = false;
  }
}
</script>
